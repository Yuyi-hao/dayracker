{% extends "base.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}
<div class="container-fluid p-4">
  <!-- HEADER  -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold mb-1">Monthly Summary for {{ context.month.month_name[1] }} - {{ context.year }}</h2>
      <p class="text-muted mb-0">Overview of your personal, work trackers and your diary entries.</p>
    </div>
    <div class="d-flex gap-2">
      <input type="month" class="form-control" id="monthPicker" value="{{ context.year }}-{{ context.month.month_num}}" onchange="window.location = '?date=' + this.value;">
    </div>
  </div>

  <div class="row g-3 mb-4">

    <!-- LEFT SIDE  -->
    <div class="col-md-10 col-lg-10">

      <!-- Personal data -->
      <h3 class="h3">Personal</h3>
      <hr>
      <div class="row g-2 mb-4">
        <!-- Mood KPI  -->
        <div class="col-md-4">
          <div class="card summary-card p-3 d-flex align-items-center">
            <div class="metric-label d-flex justify-content-between align-items-center mb-2"><span class="fw-semibold">Avg Mood</span></div>
            <div class="metric-value" id="avgMood"></div>
            <!-- TODO: need to change to progress bar -->
            <div class="kpi-bar   mb-2" id="avgMoodKpiBar"></div>
            <div class="kpi-bar mt-2" id="avgMoodKpiMoodBar"></div>
          </div>
        </div>
        
        <!-- Water intake KPI -->
        <div class="col-md-4">
          <div class="card summary-card p-3 d-flex">
            <div class="metric-label d-flex justify-content-between align-items-center mb-2">
              <span class="fw-semibold">ðŸ’§ Avg Water Intake</span>
              <small class="text-muted">Goal 2.5L</small>
            </div>
            <div class="metric-value" id="avgWaterIntake">
              <span class="h4 text-bold">2.1</span>&nbsp;
              <span class="text-muted mb-3">L/day</span>
            </div>
            <div class="progress mb-2">
              <div class="progress-bar" role="progressbar"></div>
            </div>
            <small class="text-muted d-flex justify-content-between align-items-center mb-2">
              <span>84% of goal days met</span>
              <!-- Daily Dots -->
              <div class="d-flex gap-1 flex-wrap">
                <!-- good hydration -->
                <span class="rounded-circle" style="width:10px;height:10px;background:#4dabf7;"></span>
                <!-- low -->
                <span class="rounded-circle" style="width:10px;height:10px;background:#74c0fc;"></span>
                <!-- missed -->
                <span class="rounded-circle" style="width:10px;height:10px;background:#495057;"></span>
              </div>
            </small>
          </div>
        </div>

        <!-- Screen Time KPI -->
        <div class="col-md-4">
          <div class="card summary-card p-3 d-flex">
            <div class="metric-label d-flex justify-content-between align-items-center mb-2">
              <span class="fw-semibold">Screen Time</span>
              <small class="text-muted">2 Hrs</small>
            </div>
            <div class="metric-value" id="avgScreenTime"><span class="h4 text-bold">1.4</span>&nbsp;<span class="text-muted mb-3">hrs</span></div>
            <div class="">
              <svg width="480" height="30" viewBox="0 0 480 30">
                
                <!-- Line -->
                <polyline
                id="screenTimeMiniChartLine"
                fill="none"
                stroke="#28a745"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                />
                <!-- Area -->
                <polyline
                  id="screenTimeMiniChartArea"
                  fill="rgba(40,167,69,0.2)"
                  stroke="none"
                ></polyline>
              </svg>
            </div>
  
            <small class="text-muted d-flex justify-content-between align-items-center">
              <div>
                <span class="text-semibold">Min</span>
                <span id="screenTimeMinVal">1.25 hrs</span>
              </div>
              <div>
                <span class="text-semibold">Max</span>
                <span id="screenTimeMaxVal">1.25 hrs</span>
              </div>
            </small>
  
          </div>
        </div>

      </div>

      <div class="row g-2 mb-4">
        
        <!-- sleep cycle KPI -->
        <div class="col-md-4">
          <div class="card summary-card p-3">
            <div class="metric-label d-flex justify-content-between mb-2">
              <span class="fw-semibold">Sleep Cycle</span>
              <small class="text-muted">6-8hrs</small>
            </div>
            <div class="mb-0">
              <div><span class="h4">7.5</span>&nbsp;<small class="text-muted">hrs</small></div>
              <div><small class="text-muted">Average Sleep Duration</small></div>
            </div>
  
            <div class="d-flex justify-content-between mt-2">
              <div>
                <div><span class="h5 text-bold">10:00</span></div>
                <div><small class="text-muted">Wake</small></div>
              </div>
              <div class="text-end">
                <div><span class="h5 text-bold">10:00</span></div>
                <small class="text-muted">Sleep</small>
              </div>
            </div>
  
            <div class="mt-2">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Consistency</span>
                <small id="sleepConsistency" class="text-warning">Medium</small>
              </div>
              <div class="progress" style="height: 6px;">
                <div class="progress-bar bg-warning" style="width: 55%;"></div>
              </div>
              <small class="text-muted">Â±1h 10m variance</small>
            </div>
  
            <button class="btn btn-sm btn-outline-secondary mt-3">
              View Details
            </button>
          </div>
        </div>

        <!-- Exercise KPI -->
        <div class="col-md-4">
          <div class="card summary-card p-3">
            <div class="metric-label d-flex justify-content-between mb-2">
              <span class="fw-semibold">Exercise</span>
              <small class="badge bg-secondary-subtle text-secondary-emphasis d-inline-flex align-items-center gap-1 px-2 py-1 rounded"> <span>ðŸ”¥</span> <span class="text-muted">|</span > <span class="px-1"> 5 days </span> </small>
            </div>

            <div class="row g-3">
              <!-- Number  -->
              <div class="col-md-6">
                <div class="mb-2">
                  <div><span class="h4">3.4</span>&nbsp;<small class="text-muted">medium</small></div>
                  <div><small class="text-muted">Average exercise</small></div>
                </div>

                <div class="row mt-3">
                  <!-- label -->
                  <div class="d-flex row col-md-6">
                    <small class="text-bold text-success">Light</small>
                    <small class="text-bold text-warning">Medium</small>
                    <small class="text-bold text-danger">Heavy</small>
                  </div>
                  <!-- value -->
                  <div class="d-flex row col-md-6">
                    <small class="">12 days</small>
                    <small class="">5 days</small>
                    <small class="">6 days</small>
                  </div>
                </div>

              </div>

              <!-- Chart  -->
              <div class="col-md-6 text-body-emphasis">
                <svg width="170" height="170" viewBox="0 0 170 170">
                  <g transform="rotate(-210 80 80)">

                    <!-- Background ring -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="var(--bs-border-color)"
                      stroke-width="12"
                      stroke-dasharray="260 120"
                      stroke-linecap="round"
                    />

                    <!-- NONE -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="var(--bs-secondary-color)"
                      stroke-width="12"
                      stroke-dasharray="40 340"
                      stroke-dashoffset="0"
                      stroke-linecap="round"
                    />

                    <!-- LIGHT -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#0dcaf0"
                      stroke-width="12"
                      stroke-dasharray="70 310"
                      stroke-dashoffset="-40"
                      stroke-linecap="round"
                    />

                    <!-- MEDIUM -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#ffc107"
                      stroke-width="12"
                      stroke-dasharray="60 320"
                      stroke-dashoffset="-110"
                      stroke-linecap="round"
                    />

                    <!-- HEAVY -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#198754"
                      stroke-width="12"
                      stroke-dasharray="50 330"
                      stroke-dashoffset="-170"
                      stroke-linecap="round"
                    />

                  </g>

                  <!-- Center text ðŸ”¥ -->
                  <text
                    x="80"
                    y="75"
                    text-anchor="middle"
                    fill="currentColor"
                    font-size="20"
                    font-weight="600"
                  >
                    18 / 30
                  </text>

                  <text
                    x="80"
                    y="95"
                    text-anchor="middle"
                    fill="var(--bs-secondary-color)"
                    font-size="12"
                  >
                    Active Days
                  </text>
                </svg>

              </div>

            </div>
            <button class="btn btn-sm btn-outline-secondary mt-3">
              View Details
            </button>
          </div>
        </div>
        
        <!-- Outgoing KPI -->
        <div class="col-md-4">
          <div class="card summary-card p-3">
            <div class="metric-label d-flex justify-content-between mb-2">
              <span class="fw-semibold">Outgoing</span>
              <small class="badge bg-secondary-subtle text-secondary-emphasis d-inline-flex align-items-center gap-1 px-2 py-1 rounded"> <span>ðŸ”¥</span> <span class="text-muted">|</span > <span class="px-1"> 5 days </span> </small>
            </div>

            <div class="row g-3">
              <!-- Number  -->
              <div class="col-md-6">
                <div class="mb-2">
                  <div><span class="h4">15</span>&nbsp;<small class="text-muted">Days</small></div>
                  <div><small class="text-muted">Most Common (Walk)</small></div>
                </div>

                <div class="row mt-3">
                  <!-- label -->
                  <div class="d-flex row col-md-6">
                    <small class="text-bold text-success">Essentials</small>
                    <small class="text-bold text-warning">Walk</small>
                    <small class="text-bold text-danger">Enjoy</small>
                  </div>
                  <!-- value -->
                  <div class="d-flex row col-md-6">
                    <small class="">12 days</small>
                    <small class="">5 days</small>
                    <small class="">6 days</small>
                  </div>
                </div>

              </div>

              <!-- Chart  -->
              <div class="col-md-6">
                <svg width="170" height="170" viewBox="0 0 170 170">
                  <g transform="rotate(-210 80 80)">

                    <!-- Background ring -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="var(--bs-border-color)"
                      stroke-width="12"
                      stroke-dasharray="260 120"
                      stroke-linecap="round"
                    />

                    <!-- NONE -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="var(--bs-secondary-color)"
                      stroke-width="12"
                      stroke-dasharray="40 340"
                      stroke-dashoffset="0"
                      stroke-linecap="round"
                    />

                    <!-- LIGHT -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#0dcaf0"
                      stroke-width="12"
                      stroke-dasharray="70 310"
                      stroke-dashoffset="-40"
                      stroke-linecap="round"
                    />

                    <!-- MEDIUM -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#ffc107"
                      stroke-width="12"
                      stroke-dasharray="60 320"
                      stroke-dashoffset="-110"
                      stroke-linecap="round"
                    />

                    <!-- HEAVY -->
                    <circle
                      cx="80"
                      cy="80"
                      r="60"
                      fill="none"
                      stroke="#198754"
                      stroke-width="12"
                      stroke-dasharray="50 330"
                      stroke-dashoffset="-170"
                      stroke-linecap="round"
                    />

                  </g>

                  <!-- Center text ðŸ”¥ -->
                  <text
                    x="80"
                    y="75"
                    text-anchor="middle"
                    fill="currentColor"
                    font-size="20"
                    font-weight="600"
                  >
                    18 / 30
                  </text>

                  <text
                    x="80"
                    y="95"
                    text-anchor="middle"
                    fill="var(--bs-secondary-color)"
                    font-size="12"
                  >
                    Active Days
                  </text>
                </svg>
              </div>

            </div>
            <button class="btn btn-sm btn-outline-secondary mt-3">
              View Details
            </button>
          </div>
        </div>

      </div>

      <!-- work data -->
      <h3 class="h3">Work</h3>
      <hr>
      <div class="row g-2 mb-4">
        <!-- Office time cycle KPI -->
        <div class="col-md-4">
          <div class="card summary-card p-3">
            <div class="metric-label d-flex justify-content-between mb-2">
              <span class="fw-semibold">Office Time</span>
              <small class="text-muted">9:00am-5:00pm</small>
            </div>
            <div class="mb-2 d-flex justify-content-between">
              <div>
                <div><span class="h4">7.5</span>&nbsp;<small class="text-muted">hrs â†“ 0.5 hrs below expected</small></div>
                <div><small class="text-muted">Average Office Duration</small></div>
              </div>
              <div class="text-end">
                <div><span class="h4">75</span>&nbsp;<small class="text-muted">%</small></div>
                <div><small class="text-muted">Punctuality</small></div>
              </div>
            </div>
  
            <div class="d-flex justify-content-between mt-2">
              <div>
                <div><span class="h5 text-bold">10:00 am</span></div>
                <div><small class="text-muted">Avg Arrival</small></div>
              </div>
              <div class="text-end">
                <div><span class="h5 text-bold">10:00 pm</span></div>
                <small class="text-muted">Avg Departure</small>
              </div>
            </div>
  
            <div class="mt-2">
              <div class="d-flex justify-content-between">
                <span class="text-muted">Consistency</span>
                <small id="sleepConsistency" class="text-warning">Medium</small>
              </div>
              <div class="progress" style="height: 6px;">
                <div class="progress-bar bg-warning" style="width: 55%;"></div>
              </div>
              <small class="text-muted">Â±1h 10m variance</small>
            </div>
  
            <button class="btn btn-sm btn-outline-secondary mt-3">
              View Details
            </button>
          </div>
        </div>

        <div class="col-md-8 col-lg-4">
          <div class="card summary-card p-3">
            <div class="class metric-label d-flex justify-content-between mb-2">
              <span class="fw-semibold">Breaks</span>
              <small class="text-muted">Assigned Time Break: 30 min</small>
            </div>

            <div class="mb-2">
              <div><span class="h4">38</span>&nbsp;<small class="text-muted">min/day</small></div>
              <div><small class="text-muted">Average Break duration</small></div>
            </div>

            <div class="d-flex justify-content-between mt-1">
              <small class="text-muted">No-break days</small>
              <small class="text-danger">6 days</small>
            </div>

            <div class="progress mt-2 mb-4" style="height:6px">
              <div class="progress-bar bg-info" style="width:60%"></div>
            </div>
            <svg
              viewBox="0 0 300 100"
              width="100%"
              height="80"
              preserveAspectRatio="none"
            >
              <g id="breakBars"></g>
            </svg>
            <small class="text-muted d-flex justify-content-between align-items-center">
              <div>
                <span class="text-semibold">Min</span>
                <span id="screenTimeMinVal">1.25 hrs</span>
              </div>
              <div>
                <span class="text-semibold">Max</span>
                <span id="screenTimeMaxVal">1.25 hrs</span>
              </div>
            </small>


          </div>
        </div>

        <div class="col-md-8 col-lg-4">
          <div class="row mb-2">
            <div class="col-md-12">
              <div class="card summary-card p-3">
                <div class="class metric-label d-flex justify-content-between mb-2">
                  <span class="fw-semibold">Off Days</span>
                  <small class="text-muted">8 weekend days</small>
                </div>
                <div class="mb-2 d-flex justify-content-between">
                  <div>
                    <div><span class="h4">6</span>&nbsp;<small class="text-muted">Off Days</small></div>
                  </div>
                  <div>
                    <div><span class="h4">12</span>&nbsp;<small class="text-muted">Work Days</small></div>
                  </div>
                  <div>
                    <div><span class="h4">12</span>&nbsp;<small class="text-muted">Leaves</small></div>
                  </div>
                  <div>
                    <div><span class="h4">12</span>&nbsp;<small class="text-muted">Holidays</small></div>
                  </div>
                </div>
                <div>
                  <small class="text-muted">Moderate recovery</small>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="card summary-card p-3">
                <div class="class metric-label d-flex justify-content-between mb-2">
                  <span class="fw-semibold">WorkLoad</span>
                  <small class="text-muted"><div class="badge bg-danger">moderate</div></small>
                </div>
                <div class="mb-2">
                  <div><span class="h4">3.8</span>&nbsp;<small class="text-muted">/5</small></div>
                  <div><small class="text-muted">Average workload</small></div>
                </div>
                <div class="mb-2">
                  <span class="badge bg-warning text-dark me-1">Tiring</span>
                  <span class="badge bg-danger">Hectic</span>
                  <small class="text-muted ms-2">42% of days</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row g-2 mb-4">
        <div class="col-md-8 col-lg-8">
          <div class="card summary-card p-3 h-100">
            <div class="metric-label d-flex justify-content-between mb-2">
              <span class="fw-semibold">Productivity</span>
              <small class="text-muted">Assigned vs Completed</small>
            </div>

            <canvas id="productivityChart" height="140"></canvas>
          </div>

        </div>
        <div class="col-md-4 col-lg-4">
          <div class="card summary-card p-3 h-100">
            <div class="metric-label mb-2">
              <span class="fw-semibold">Work Balance Overview</span>
            </div>

            <canvas id="workRadarChart" height="220"></canvas>
          </div>

        </div>
      </div>
    </div>
    
    <!-- RIGHT SIDE  -->
    <div class="col-md-2 col-lg-2">
      <!-- Calender -->
      <div class="col-md-12">
        <div class="streak-calender">
          <div class="calender-days-label">
            <span class="day-label">Sun</span>
            <span class="day-label">Mon</span>
            <span class="day-label">Tue</span>
            <span class="day-label">Wed</span>
            <span class="day-label">Thu</span>
            <span class="day-label">Fri</span>
            <span class="day-label">Sat</span>
          </div>
          <div id="streakCalenderGrid"></div>
        </div>
      </div>

    </div>

  </div>

</div>


<!-- charts  -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  function renderStreakCalender(year, month, activeDays=[3, 4, 5, 6]){
    const grid = document.getElementById('streakCalenderGrid');
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month+1, 0).getDate();
    grid.innerHTML = "";

    // skip cells in start of month
    for(let i=0; i<firstDay; i++){
      const empty = document.createElement('div');
      empty.className = 'day-cell inactive';
      grid.appendChild(empty);
    }
    
    for(let day=1; day<=daysInMonth; day++){
      const cell = document.createElement('div');
      cell.className = 'day-cell';
      cell.innerText = day;
      if(activeDays.includes(day)){
        const dot = document.createElement('div');
        dot.className = 'dot-success';
        cell.appendChild(dot);
      }
      grid.appendChild(cell);
    }
  }

  renderStreakCalender({{ context.year }}, {{ context.month.month_num }});

  const moodDataCategory = {
    0: {mood:'None'     , emoji:'âšª', color:`#6c757d`},
    1: {mood:'Bad'      , emoji:'ðŸ˜ž', color:`#dc3545` },
    2: {mood:'Not good' , emoji:'ðŸ˜•', color:`#fd7e14` },
    3: {mood:'Neutral'  , emoji:'ðŸ˜', color:`#adb5bd` },
    4: {mood:'Good'     , emoji:'ðŸ™‚', color:`#20c997` },
    5: {mood:'Amazing'  , emoji:'ðŸ˜„', color:`#0d6efd` }
  };

  function renderMoodKpiBar(data, averageVal){
    document.getElementById('avgMood').innerHTML = `<span class="h4 text-bold">${averageVal}</span>
          <span class="text-muted mb-3">${moodDataCategory[Math.round(averageVal)%6].emoji}</span>`;
    let total = data.reduce((x, y) => x + y, 0);
    const kpiBar = document.getElementById('avgMoodKpiBar');
    const kpiBarMood = document.getElementById('avgMoodKpiMoodBar');
    for(let i=0; i<6; i++){
      if(data[i] <= 0) continue;
      const bar = document.createElement('div');
      bar.style.background = moodDataCategory[i].color;
      bar.style.width = `${Math.floor(100*(data[i]/total))}%`;
      bar.style.height = `100%`;
      bar.title = moodDataCategory[i].mood;
      kpiBar.appendChild(bar);
      const moodVal = document.createElement('div');
      moodVal.innerText = moodDataCategory[i].emoji;
      moodVal.style.width = `${Math.floor(100*(data[i]/total))}%`;
      moodVal.style.height = `100%`;
      moodVal.style.textAlign = `center`;
      moodVal.title = moodDataCategory[i].mood;
      kpiBarMood.appendChild(moodVal);
    }
  }

  renderMoodKpiBar([2, 3, 4, 5, 8, 9], 5);

  function renderScreenTimeSparkLineChart(data, width, height){
    const max = Math.max(...data);
    const min = Math.min(...data);

    const pointsData =  data.map((value, i)=>{
      let x = (i/(data.length-1))*width;
      let y = height-((value-min)/(max-min))*height;
      return {x, y};
    })
    
    document.getElementById("screenTimeMiniChartLine").setAttribute("points", pointsData.map((p) => `${p.x},${p.y}`).join(" "));
    document.getElementById("screenTimeMiniChartArea").setAttribute("points", [`0,${height}`, ...pointsData.map((p) => `${p.x},${p.y}`), `${width},${height}`].join(" "));
    document.getElementById("screenTimeMinVal").innerText = `${min} mins`;
    document.getElementById("screenTimeMaxVal").innerText = `${max} mins`;
  }

  renderScreenTimeSparkLineChart({{ context.personal_trackers_data_compute.screen_time|tojson }}, 740, 25);

  function renderBreakBarChart(data) {
  const svgGroup = document.getElementById("breakBars");
  svgGroup.innerHTML = "";

  const width = 300;
  const height = 80;
  const barGap = 2;

  const max = Math.max(...data, 30); // avoid flat bars
  const barWidth = width / data.length;

  data.forEach((value, i) => {
    const barHeight = (value / max) * height;
    const x = i * barWidth;
    const y = height - barHeight;

    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    rect.setAttribute("x", x + barGap / 2);
    rect.setAttribute("y", y);
    rect.setAttribute("width", barWidth - barGap);
    rect.setAttribute("height", barHeight);
    rect.setAttribute("rx", 2);

    // color logic
    rect.setAttribute(
      "fill",
      value < 20 ? "#dc3545" : value < 40 ? "#ffc107" : "#198754"
    );

    svgGroup.appendChild(rect);
  });

  const avg =
    data.reduce((a, b) => a + b, 0) / data.length;
  document.getElementById("breakAvg").innerText = avg.toFixed(0);
}

renderBreakBarChart([
  15, 20, 10, 30, 45, 25, 20,
  15, 10, 40, 35, 20, 25,
  30, 15, 10, 20, 25,
  30, 35, 40, 20, 15,
  10, 30, 45, 20, 25, 30
]);

const ctxProd = document.getElementById('productivityChart');

new Chart(ctxProd, {
  type: 'bar',
  data: {
    labels: ['Mon','Tue','Wed','Thu','Fri','Sat'],
    datasets: [
      {
        label: 'Assigned',
        data: [8, 7, 9, 8, 6, 5],
        backgroundColor: 'rgba(108,117,125,0.4)'
      },
      {
        label: 'Completed',
        data: [7, 6, 9, 6, 5, 4],
        backgroundColor: 'rgba(25,135,84,0.6)'
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { position: 'bottom' }
    },
    scales: {
      y: {
        beginAtZero: true,
        ticks: { stepSize: 2 }
      }
    }
  }
});


const ctxRadar = document.getElementById('workRadarChart');

new Chart(ctxRadar, {
  type: 'radar',
  data: {
    labels: [
      'Consistency',
      'Productivity',
      'Breaks',
      'Punctuality',
      'Workload'
    ],
    datasets: [{
      label: 'This Month',
      data: [65, 75, 50, 70, 60],
      fill: true,
      backgroundColor: 'rgba(13,110,253,0.15)',
      borderColor: 'rgba(13,110,253,0.8)',
      pointBackgroundColor: 'rgba(13,110,253,1)'
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { display: false }
    },
    scales: {
      r: {
        min: 0,
        max: 100,
        ticks: { display: false }
      }
    }
  }
});

</script>
{% endblock %}